{% extends "base/__normal.html" %}
{% load tags %}

{% block title %}Room Tag{% endblock %}
{% block banner %}Batch Room Tag{% endblock %}

{% block content %}
{% csrf_token %}

<div class="col">
  {% quick_search %}

    <div class="dialogue mb-4">
      <form method="post" action="{% url 'add_room_tag' %}" class="form-inline">
      {% csrf_token %}
      <label for="tag" class="mr-2">Create New Tag:</label>
      <div class="form-group mr-2">
        <input type="text" class="form-control" id="tag" name="tag" placeholder="Tag" required>
      </div>
      <div class="form-group mr-2">
        <input type="number" class="form-control" id="priority" name="priority" placeholder="Priority" min="0" max="99" required>
      </div>
      <button type="submit" class="btn btn-primary">Add Tag</button>
      </form>
    </div>

    <table class="table table-striped table-bordered table-sm">
    <thead>
    <th>Room</th>
      {% for tag in tags %}<th style="border-bottom: 8px solid {{tag.color}}; box-sizing:border-box;"><a href="/tag/{{ tag.pk }}">{{ tag.tag }}</a></th>{% endfor %}
    </thead>
    {% for room, tags_list in rooms_and_tags %}
    <tr class="searchable">
      <td>
        <a href="/room/{{room.id}}">{{ room.name }}</a>
      </td>
      {% for tag, status in tags_list %}
      <td>
        <div class="custom-control custom-switch">
          <input type="checkbox" class="custom-control-input tag-toggle"
                 data-room-id="{{room.id}}"
                 data-tag-id="{{tag.pk}}"
                 id="toggle-{{ room.id }}-{{ tag.pk }}"
                 {% if status %}checked{% endif %}>
                 <label class="custom-control-label" for="toggle-{{ room.id }}-{{ tag.pk }}">
                  {% if status %}Tagged{% else %}Untagged{% endif %}
                </label>
        </div>
      </td>
      {% endfor %}
    </tr>
    {% endfor %}
  </table>
</div>
{% endblock %}